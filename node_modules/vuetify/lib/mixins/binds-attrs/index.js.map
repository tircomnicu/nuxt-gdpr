{"version":3,"sources":["../../../src/mixins/binds-attrs/index.ts"],"names":[],"mappings":"AAAA,OAAO,GAAP,MAA6C,KAA7C;AAEA;;;;;AAKA,SAAS,WAAT,CAAsB,QAAtB,EAAsC;AACpC,SAAO;AACL,IAAA,OAAO,CAAE,GAAF,EAAO,MAAP,EAAa;AAClB,WAAK,MAAM,IAAX,IAAmB,MAAnB,EAA2B;AACzB,YAAI,CAAC,MAAM,CAAC,SAAP,CAAiB,cAAjB,CAAgC,IAAhC,CAAqC,GAArC,EAA0C,IAA1C,CAAL,EAAsD;AACpD,eAAK,OAAL,CAAa,KAAK,KAAL,CAAW,QAAX,CAAb,EAAmC,IAAnC;AACD;AACF;;AACD,WAAK,MAAM,IAAX,IAAmB,GAAnB,EAAwB;AACtB,aAAK,IAAL,CAAU,KAAK,KAAL,CAAW,QAAX,CAAV,EAAgC,IAAhC,EAAsC,GAAG,CAAC,IAAD,CAAzC;AACD;AACF,KAVI;;AAWL,IAAA,SAAS,EAAE;AAXN,GAAP;AAaD;;AAED,eAAe,GAAG,CAAC,MAAJ,CAAW;AACxB,EAAA,IAAI,EAAE,OAAO;AACX,IAAA,MAAM,EAAE,EADG;AAEX,IAAA,UAAU,EAAE;AAFD,GAAP,CADkB;AAMxB,EAAA,KAAK,EAAE;AACL;AACA;AACA,IAAA,MAAM,EAAE,WAAW,CAAC,QAAD,CAHd;AAIL,IAAA,UAAU,EAAE,WAAW,CAAC,YAAD;AAJlB;AANiB,CAAX,CAAf","sourcesContent":["import Vue, { WatchOptionsWithHandler } from 'vue'\n\n/**\n * This mixin provides `attrs$` and `listeners$` to work around\n * vue bug https://github.com/vuejs/vue/issues/10115\n */\n\nfunction makeWatcher (property: string): ThisType<Vue> & WatchOptionsWithHandler<any> {\n  return {\n    handler (val, oldVal) {\n      for (const attr in oldVal) {\n        if (!Object.prototype.hasOwnProperty.call(val, attr)) {\n          this.$delete(this.$data[property], attr)\n        }\n      }\n      for (const attr in val) {\n        this.$set(this.$data[property], attr, val[attr])\n      }\n    },\n    immediate: true,\n  }\n}\n\nexport default Vue.extend({\n  data: () => ({\n    attrs$: {} as Dictionary<string>,\n    listeners$: {} as Dictionary<Function | Function[]>,\n  }),\n\n  watch: {\n    // Work around unwanted re-renders: https://github.com/vuejs/vue/issues/10115\n    // Make sure to use `attrs$` instead of `$attrs` (confusing right?)\n    $attrs: makeWatcher('attrs$'),\n    $listeners: makeWatcher('listeners$'),\n  },\n})\n"],"sourceRoot":"","file":"index.js"}